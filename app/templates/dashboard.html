{% extends "layout.html" %}
{% block content %}
  <div class="metric-row">
    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="javascript:void(0)" class="metric metric-bordered text-center no-margin">
            <b>Total Vechicle</b>
            <p class="metric-value h3 mt-2">
              <sub><i class="fas fa-car font-size-25 text-success"></i></sub> <span class="value">956</span>
            </p>
            <b class="mt-3">EV: 400 | ICE: 45</b>
            <p class="text-success font-weight-bold"><i class="fa fa-arrow-up" aria-hidden="true"></i> (+4 New)</p>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="{{ url_for('main.alerts') }}" class="metric metric-bordered text-center no-margin">
            <div class="metric-badge">
              <span class="badge badge-lg badge-danger"><span class="oi oi-media-record pulse mr-1"></span> Alerts</span>
            </div>
            <p class="metric-value h3 mt-3">
              <sub><i class="fas fa-triangle-exclamation font-size-25 text-danger"></i></sub> <span class="value">23</span>
            </p>
            <p class="font-weight-bold" style="margin-top: 24px; color: #e30101;"><i class="fa fa-arrow-down" aria-hidden="true"></i> 5 vs last month</p>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="{{ url_for('main.reminders') }}" class="metric metric-bordered text-center no-margin">
            <div class="metric-badge">
              <span class="badge badge-lg badge-warning"><span class="oi oi-media-record pulse mr-1"></span> Reminders</span>
            </div>
            <p class="metric-value h3 mt-3">
              <sub><i class="fas fa-bell font-size-25 text-success"></i></sub> <span class="value">48</span>
            </p>
            <p class="font-weight-bold" style="margin-top: 24px; color: #e30101;"><i class="fa fa-arrow-down" aria-hidden="true"></i> 6 vs last month</p>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="javascript:void(0)" class="metric metric-bordered text-center no-margin">
            <b>Service</b>
            <p class="metric-value h3 mt-3">
              <sub><i class="fas fa-wrench font-size-25 text-success"></i></sub> <span class="value">77</span>
            </p>
            <p class="text-success font-weight-bold" style="margin-top: 29px;"><i class="fa fa-arrow-up" aria-hidden="true"></i> 9 vs last month</p>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="javascript:void(0)" class="metric metric-bordered text-center no-margin">
            <b>Routes</b>
            <p class="metric-value h3 mt-3">
              <sub><i class="fas fa-route font-size-25 text-success"></i></sub> <span class="value">67</span>
            </p>
            <p class="text-success font-weight-bold" style="margin-top: 29px;"><i class="fa fa-arrow-up" aria-hidden="true"></i> 11 vs last month</p>
          </a>
        </div>
      </div>
    </div>

    <div class="col-lg-2">
      <div class="card card-fluid">
        <div class="card-body no-padding">
          <a href="javascript:void(0)" class="metric metric-bordered no-margin">
            <b>Maintenance cost</b>
            <p class="metric-value h3 mt-3">
              <sub><i class="oi oi-timer font-size-25 text-success"></i></sub> <span class="value">$5,678</span>
            </p>
            <p class="font-weight-bold" style="margin-top: 29px; color: #e30101;"><i class="fa fa-arrow-down" aria-hidden="true"></i> $1,200 vs last month</p>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-5">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title">Total Vechicle </h3>
          <div class="row">
            <div class="col-sm-8">
              <div class="text-center pt-3" style="margin-top: 35px;margin-bottom: 34px;">
                <div class="chart-inline-group" style="height:214px">
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="60" data-size="214" data-bar-color="#00a28a" data-track-color="true" data-scale-color="false" data-rotate="225"></div>
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="50" data-size="174" data-bar-color="#036a5b" data-track-color="true" data-scale-color="false" data-rotate="225"></div>
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="75" data-size="134" data-bar-color="#ea6759" data-track-color="true" data-scale-color="false" data-rotate="225" id="total_vechicle_easypiechart_3"></div>
                </div>
              </div>
            </div>

            <div class="col-sm-4" style="margin-top: 60px;">
              <nav class="nav nav-tabs flex-column border-0">
                <a href="javascript:void(0);" class="nav-link active" style="border-color: #00a28a;padding: 0px;padding-left: 15px;margin-bottom: 20px;padding-top: 1px;"><span class="font-weight-bold" style="color: #00a28a">ON ROUTE</span> <br>32000</a>
                <a href="javascript:void(0);" class="nav-link active" style="border-color: #036a5b;padding: 0px;padding-left: 15px;margin-bottom: 20px;padding-top: 1px;"><span class="font-weight-bold" style="color: #036a5b">AVAILABLE</span> <br>320</a>
                <a href="javascript:void(0);" class="nav-link active" style="border-color: #ea6759;padding: 0px;padding-left: 15px;margin-bottom: 20px;padding-top: 1px;"><span class="font-weight-bold" style="color: #ea6759">OUT OF SERVICE</span> <br>200</a>
              </nav>
            </div>
          </div>
        </div>

        <!-- <div class="card-footer">
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-success"></i> 456 <div class="text-muted small"> Active </div>
          </div>
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-yellow"></i> 78 <div class="text-muted small"> Idle </div>
          </div>
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-red"></i> 98 <div class="text-muted small"> In-shop </div>
          </div>
        </div> -->
      </div>
    </div>

    <div class="col-xl-7">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title"> Vehicle Condition <span class="text-primary float-right"></span></h3>

          <div class="row">
            <div class="col-sm-4">
              <div class="text-center pt-3">
                <div class="chart-inline-group" style="height:214px">
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="60" data-size="174" data-bar-color="#00a28a" data-track-color="true" data-scale-color="false" data-rotate="225" id="vehicle_condition_easypiechart_1">Good</div>
                </div>
                <h5>245</h5>
                <p>Vehicles</p>
              </div>
            </div>

            <div class="col-sm-4">
              <div class="text-center pt-3">
                <div class="chart-inline-group" style="height:214px">
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="50" data-size="174" data-bar-color="#f7c46c" data-track-color="true" data-scale-color="false" data-rotate="225" id="vehicle_condition_easypiechart_2">Satisfactory</div>
                </div>
                <h5>266</h5>
                <p>Vehicles</p>
              </div>
            </div>

            <div class="col-sm-4">
              <div class="text-center pt-3">
                <div class="chart-inline-group" style="height:214px">
                  <div class="easypiechart" data-toggle="easypiechart" data-percent="75" data-size="174" data-bar-color="#ea6759" data-track-color="true" data-scale-color="false" data-rotate="225" id="vehicle_condition_easypiechart_3">Critical</div>
                </div>
                <h5>288</h5>
                <p>Vehicles</p>
              </div>
            </div>
          </div>
              
        </div>

        <!-- <div class="card-footer">
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-success"></i> 456 <div class="text-muted small"> Good </div>
          </div>
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-yellow"></i> 78 <div class="text-muted small"> Satisfactory </div>
          </div>
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-red"></i> 98 <div class="text-muted small"> Critical </div>
          </div>
        </div> -->
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title mb-4"> Last 3 Months Fuel Trends </h3>
          <div class="chartjs" style="height: 192px">
            <canvas id="last_3_months_fuel_trends"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title mb-4"> Last 3 Months Mileage Trends </h3>
          <div class="chartjs" style="height: 192px">
            <canvas id="last_3_months_mileage_trends"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title mb-4"> CO2 Emission Report </h3>
          <div class="chartjs" style="height: 192px">
            <canvas id="co2_emission_report"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-6">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center"> EV Usage </h3>
          <div id="ev_usage_graph_area" class="flot"></div>
        </div>
      </div>
    </div>

    <div class="col-lg-6">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center"> Weekly Idl Cost </h3>
          <div id="weekly_idl_cost_graph" class="flot"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center">Top 5 Performing Vehicles </h3>
          <table class="table table-striped table-bordered mt-3">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Vehicle</th>
                <th>Efficiency</th>
                <th>Distance Covered</th>
                <th>Uptime</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1 🥇</td>
                <td>Toyota Corolla</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 95%;"></div>
                      </div>
                      <span class="percentage">95%</span>
                    </div>
                  </div>
                </td>
                <td>12,300 km</td>
                <td>98%</td>
              </tr>
              <tr>
                <td>2 🥉</td>
                <td>Honda Civic</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 92%;"></div>
                      </div>
                      <span class="percentage">92%</span>
                    </div>
                  </div>
                </td>
                <td>11,700 km</td>
                <td>96%</td>
              </tr>
              <tr>
                <td>3 🥈</td>
                <td>Ford Mustang</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 89%;"></div>
                      </div>
                      <span class="percentage">89%</span>
                    </div>
                  </div>
                </td>
                <td>11,200 km</td>
                <td>94%</td>
              </tr>
              <tr>
                <td>4 🥈</td>
                <td>Chevrolet Malibu</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 87%;"></div>
                      </div>
                      <span class="percentage">87%</span>
                    </div>
                  </div>
                </td>
                <td>10,800 km</td>
                <td>93%</td>
              </tr>
              <tr>
                <td>5 🥈</td>
                <td>Nissan Altima</td>
                <td>
                 <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 75%;"></div>
                      </div>
                      <span class="percentage">75%</span>
                    </div>
                  </div>
                </td>
                <td>10,500 km</td>
                <td>92%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-sm-6">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center">Top 5 Least Efficient Vehicle</h3>
          <table class="table table-striped table-bordered mt-3">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Vehicle</th>
                <th>Efficiency</th>
                <th>Fuel Waste</th>
                <th>Downtime</th>
                <th>Score</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>🟥 1</td>
                <td>BMW 3A</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 45%;"></div>
                      </div>
                      <span class="percentage">45%</span>
                    </div>
                  </div>
                </td>
                <td>High</td>
                <td>30%</td>
                <td>🚨 Very Low</td>
              </tr>
              <tr>
                <td>🟧 2</td>
                <td>Audi</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 48%;"></div>
                      </div>
                      <span class="percentage">48%</span>
                    </div>
                  </div>
                </td>
                <td>High</td>
                <td>25%</td>
                <td>⚠️ Critical</td>
              </tr>
              <tr>
                <td>🟧 3</td>
                <td>Audi 2</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 50%;"></div>
                      </div>
                      <span class="percentage">50%</span>
                    </div>
                  </div>
                </td>
                <td>Medium</td>
                <td>20%</td>
                <td>⚠️ Needs Attention</td>
              </tr>
              <tr>
                <td>🟨 4</td>
                <td>Lexius</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 52%;"></div>
                      </div>
                      <span class="percentage">52%</span>
                    </div>
                  </div>
                </td>
                <td>Medium</td>
                <td>18%</td>
                <td>🔶 Below Average</td>
              </tr>
              <tr>
                <td>🟨 5</td>
                <td>Altima</td>
                <td>
                  <div class="horizontal-rating">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 55%;"></div>
                      </div>
                      <span class="percentage">55%</span>
                    </div>
                  </div>
                </td>
                <td>Medium</td>
                <td>15%</td>
                <td>🔶 Below Average</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-sm-8">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center">5 Aggressive Behaviour Driver's </h3>
          <table class="table table-striped table-bordered mt-3">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Driver Name</th>
                <th>Vehicle</th>
                <th>Harsh Brakes</th>
                <th>Speeding</th>
                <th>Idling</th>
                <th>Safety Score</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>🟥 1</td>
                <td class="d-flex">
                  <div>
                    John D.
                  </div>
                  <div class="horizontal-rating ml-2" style="width: 100px;">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 45%;"></div>
                      </div>
                      <span class="percentage">45%</span>
                    </div>
                  </div>
                </td>
                <td>Toyota Corolla</td>
                <td>15</td>
                <td>10</td>
                <td>High</td>
                <td>🚨 45%</td>
              </tr>
              <tr>
                <td>🟧 2</td>
                <td class="d-flex">
                  <div>Mike T.</div>
                  <div class="horizontal-rating ml-2" style="width: 100px;">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 48%;"></div>
                      </div>
                      <span class="percentage">48%</span>
                    </div>
                  </div>
                </td>
                <td>Audi</td>
                <td>10</td>
                <td>12</td>
                <td>High</td>
                <td>⚠️ 48%</td>
              </tr>
              <tr>
                <td>🟧 3</td>
                <td class="d-flex">
                  <div>Sarah L.</div>
                  <div class="horizontal-rating ml-2" style="width: 100px;">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 50%;"></div>
                      </div>
                      <span class="percentage">50%</span>
                    </div>
                  </div>
                </td>
                <td>Lexius</td>
                <td>12</td>
                <td>14</td>
                <td>Medium</td>
                <td>⚠️ 50%</td>
              </tr>
              <tr>
                <td>🟨 4</td>
                <td class="d-flex">
                  <div>David P.</div>
                  <div class="horizontal-rating ml-2" style="width: 100px;">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 52%;"></div>
                      </div>
                      <span class="percentage">52%</span>
                    </div>
                  </div>
                </td>
                <td>Ford Mustang</td>
                <td>9</td>
                <td>10</td>
                <td>Medium</td>
                <td>🔶 52%</td>
              </tr>
              <tr>
                <td>🟨 5</td>
                <td class="d-flex">
                  <div>Emma W.</div>
                  <div class="horizontal-rating ml-2" style="width: 100px;">
                    <div class="rating-container">
                      <div class="rating-bar">
                        <div class="rating-fill" style="width: 55%;"></div>
                      </div>
                      <span class="percentage">55%</span>
                    </div>
                  </div>
                </td>
                <td>Nissan Altima</td>
                <td>8</td>
                <td>9</td>
                <td>Medium</td>
                <td>🔶 55%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-header">
          <h3 class="card-title text-center">Top 5 Aggressive Drivers </h3>
        </div>
        <div class="card-body">
          <canvas id="top_5_aggressive_drivers" style="width:100%;min-height: 280px;"></canvas>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title mb-4"> Driving Distance </h3>
          <p class="text-center font-weight-bold">
            Average Hours Driven<br>
            17.5 h
          </p>
          <div class="chartjs" style="height: 192px">
            <canvas id="driving_distance_graph"></canvas>
          </div>

          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th> Top Vehicles </th>
                  <th class="text-right"> Distance </th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td class="align-middle text-truncate">
                    <a href="{{ url_for('main.vehicle_show') }}">BMW</a>
                  </td>
                  <td class="align-middle text-center"> 40 mi </td>
                </tr>

                <tr>
                  <td class="align-middle text-truncate">
                    <a href="{{ url_for('main.vehicle_show') }}">Toyota</a>
                  </td>
                  <td class="align-middle text-center"> 220 mi </td>
                </tr>

                <tr>
                  <td class="align-middle text-truncate">
                    <a href="{{ url_for('main.vehicle_show') }}">Audi</a>
                  </td>
                  <td class="align-middle text-center"> 670 mi </td>
                </tr>

                <tr>
                  <td class="align-middle text-truncate">
                    <a href="{{ url_for('main.vehicle_show') }}">BMW2</a>
                  </td>
                  <td class="align-middle text-center"> 480 mi </td>
                </tr>

                <tr>
                  <td class="align-middle text-truncate">
                    <a href="{{ url_for('main.vehicle_show') }}">Lexius</a>
                  </td>
                  <td class="align-middle text-center"> 300 mi </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="card card-fluid">
        <div class="card-header">
          <h6>Driver Safety Scorecard</h6>
        </div>

        <div class="card-body">
          <center>
            <canvas id="driver_safety_scorecard" width="251" height="251"></canvas>
          </center>
        </div>

        <div class="card-footer" style="margin-top: 127px">
          <div class="row">
            <div class="col-sm-6">
              <div class="card-footer-item">
                <i class="fa fa-fw fa-circle text-success"></i> <div class="text-muted small"> Fuel Used Dividend </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="card-footer-item">
                <i class="fa fa-fw fa-circle text-primary"></i> <div class="text-muted small"> Fuel Used Dividend </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="card-footer-item">
                <i class="fa fa-fw fa-circle text-warning"></i> <div class="text-muted small"> Fuel Used Dividend </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="card-footer-item">
                <i class="fa fa-fw fa-circle text-danger"></i> <div class="text-muted small"> Fuel Used Dividend </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="card card-fluid">
        <div class="card-body">
          <h3 class="card-title text-center"> Fuel Usages </h3>
          <div class="false-For-Bottom-Text">
            <div class="mypiechart">
              <center>
                <canvas id="fuel_usage_pie_chart" width="300" height="300"></canvas>
              </center>
            </div>

            <p class="text-center mt-2 font-weight-bold">Total Fuel Used 33,422.45 gal</p>
          </div>
        </div>

        <div class="card-footer" style="margin-top: 127px">
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-success"></i> <div class="text-muted small"> Fuel Used Dividend </div>
          </div>
          <div class="card-footer-item">
            <i class="fa fa-fw fa-circle text-red"></i> <div class="text-muted small"> Fuel Wastage </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
        