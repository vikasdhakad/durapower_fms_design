{% extends "layout.html" %}

{% block content %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    table {
      margin-top: 20px;
    }

    table th, table td {
      text-align: center;
    }

    .table-container {
      margin-bottom: 40px;
    }

    .heading {
        text-align: center;
    }

    .value-icon {

        cursor: pointer;

        font-size: 18px;

        color: blue;

    }

    .value-tooltip {

        visibility: hidden;

        position: absolute;

        background-color: rgba(0, 0, 0, 0.7);

        color: white;

        border-radius: 5px;

        padding: 5px;

        font-size: 14px;

    }

   .value-icon:hover + .value-tooltip {

        visibility: visible;

    }

    .row {

        margin-bottom: 30px;

    }

    .chart-container {

        display: flex;

        justify-content: space-around;

        margin-bottom: 40px;

    }

    .chart-container canvas {

        width: 45% !important;

        height: auto !important;

    }
  </style>

  <div class="containerx">
    <div class="card card-fluid">
      <div class="card-header">
        <h3 class="heading">
          AI-Driven Vehicle-to-Route Matching
          <span class="value-icon" data-toggle="tooltip" data-placement="top" title="Prevents low-fuel or unhealthy vehicles from being assigned to long routes.">üí°</span>
        </h3>
      </div>
      <div class="card-body">
        <div class="table-container">
          <div class="row">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Vehicle</th>
                  <th>Route</th>
                  <th>Reason</th>
                  <th>Fuel Level (%)</th>
                  <th>Battery Level (%)</th>
                  <th>Vehicle Health (%)</th>
                  <th>Toll Tax</th>
                  <th>Timestamp</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>V-205</td>
                  <td>R-1001</td>
                  <td>Best fuel efficiency, good condition</td>
                  <td>80%</td>
                  <td>N/A</td>
                  <td>95%</td>
                  <td>$12</td>
                  <td>25/3/25 9:00</td>
                </tr>
                <tr>
                  <td>V-308</td>
                  <td>R-1002</td>
                  <td>Shortest trip, sufficient fuel level</td>
                  <td>60%</td>
                  <td>N/A</td>
                  <td>85%</td>
                  <td>$32</td>
                  <td>25/3/25 9:10</td>
                </tr>
                <tr>
                  <td>V-412</td>
                  <td>R-1003</td>
                  <td>EV vehicle, high charge, best energy efficiency</td>
                  <td>N/A</td>
                  <td>90%</td>
                  <td>88%</td>
                  <td>$17</td>
                  <td>25/3/25 9:20</td>
                </tr>
                <tr>
                  <td>V-517</td>
                  <td>R-1004</td>
                  <td>Avoid‚Äîlow fuel, high maintenance risk</td>
                  <td>25%</td>
                  <td>N/A</td>
                  <td>60%</td>
                  <td>$10</td>
                  <td>25/3/25 9:30</td>
                </tr>
                <tr>
                  <td>V-678</td>
                  <td>R-1005</td>
                  <td>Strong battery, reliable performance</td>
                  <td>N/A</td>
                  <td>85%</td>
                  <td>92%</td>
                  <td>$13</td>
                  <td>25/3/25 9:40</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-fluid">
      <div class="card-header">
        <h3 class="heading">
          Route Compliance & Deviation Alerts
          <span class="value-icon" data-toggle="tooltip" data-placement="top" title="Alerts fleet managers when drivers go off-route (unauthorized trips).">üí°</span>
        </h3>
      </div>
      <div class="card-body">
        <!-- Route Compliance & Deviation Alerts Table -->
        <div class="table-container">
          <div class="row">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Vehicle</th>
                  <th>Deviation Detected</th>
                  <th>Deviation Reason</th>
                  <th>Timestamp</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>V-205</td>
                  <td>‚ùå No</td>
                  <td>N/A</td>
                  <td>25/3/25 9:00</td>
                </tr>
                <tr>
                  <td>V-308</td>
                  <td>‚úÖ Yes</td>
                  <td>Driver took a shortcut</td>
                  <td>25/3/25 9:15</td>
                </tr>
                <tr>
                  <td>V-412</td>
                  <td>‚úÖ Yes</td>
                  <td>Vehicle has insufficient fuel for the assigned route</td>
                  <td>25/3/25 9:30</td>
                </tr>
                <tr>
                  <td>V-517</td>
                  <td>‚úÖ Yes</td>
                  <td>Traffic reroute</td>
                  <td>25/3/25 9:45</td>
                </tr>
                <tr>
                  <td>V-678</td>
                  <td>‚úÖ Yes</td>
                  <td>EV or hybrid vehicle has low battery charge affecting the vehicle‚Äôs range</td>
                  <td>25/3/25 10:00</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-fluid">
      <div class="card-header">
        <h3 class="heading">
          Route Downtime & Risk Prediction
          <span class="value-icon" data-toggle="tooltip" data-placement="top" title="Helps fleet managers avoid high-risk routes that cause vehicle failures.">üí°</span>
        </h3>
      </div>
      <div class="card-body">
        <!-- Route Downtime & Risk Prediction Table -->
        <div class="table-container">
          <div class="row">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Route</th>
                  <th>Avg Downtime (min)</th>
                  <th>Historical Breakdowns (%)</th>
                  <th>Road Condition</th>
                  <th>Risk Level</th>
                  <th>Last Updated</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>R-1001</td>
                  <td>3 min</td>
                  <td>5%</td>
                  <td>Good</td>
                  <td>Low</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>R-1002</td>
                  <td>5 min</td>
                  <td>12%</td>
                  <td>Moderate</td>
                  <td>Medium</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>R-1003</td>
                  <td>10 min</td>
                  <td>25%</td>
                  <td>Poor</td>
                  <td>High</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>R-1004</td>
                  <td>2 min</td>
                  <td>3%</td>
                  <td>Good</td>
                  <td>Low</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>R-1005</td>
                  <td>8 min</td>
                  <td>18%</td>
                  <td>Rough</td>
                  <td>Medium</td>
                  <td>25/3/25</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-fluid">
      <div class="card-body">
        <!-- Backhaul Optimization Table -->
        <div class="table-container">
          <h3 class="heading">
            Backhaul Optimization
            <span class="value-icon" data-toggle="tooltip" data-placement="top" title="Identifies return trips with loads to reduce empty vehicle routes.">üí°</span>
          </h3>
          <div class="row">
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Vehicle</th>
                  <th>Route</th>
                  <th>Return Trip Load</th>
                  <th>Fuel Efficiency</th>
                  <th>Last Updated</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>V-205</td>
                  <td>R-1001</td>
                  <td>Full</td>
                  <td>Good</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>V-308</td>
                  <td>R-1002</td>
                  <td>Partial</td>
                  <td>Moderate</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>V-412</td>
                  <td>R-1003</td>
                  <td>None</td>
                  <td>Poor</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>V-517</td>
                  <td>R-1004</td>
                  <td>Full</td>
                  <td>Excellent</td>
                  <td>25/3/25</td>
                </tr>
                <tr>
                  <td>V-678</td>
                  <td>R-1005</td>
                  <td>Partial</td>
                  <td>Good</td>
                  <td>25/3/25</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-fluid">
      <div class="card-body">
        <!-- Graph Section -->
        <div class="chart-container">
          <div class="col-md-6">
            <canvas id="vehicleHealthPieChart"></canvas>
          </div>
          <div class="col-md-6">
            <canvas id="routeRiskPieChart"></canvas>
          </div>
        </div>
        </div>
        <script>
          // Chart.js - Vehicle Health Pie Chart
          var ctx1 = document.getElementById('vehicleHealthPieChart').getContext('2d');
          var vehicleHealthChart = new Chart(ctx1, {
            type: 'pie',
            data: {
              labels: ['Short Route', 'Long Route'],
              datasets: [{
                data: [80, 20],
                backgroundColor: ['#36A2EB', '#FF6384'],
                borderWidth: 1
              }]
            }
          });
          // Chart.js - Route Risk Pie Chart
          var ctx2 = document.getElementById('routeRiskPieChart').getContext('2d');
          var routeRiskChart = new Chart(ctx2, {
            type: 'pie',
            data: {
              labels: ['Low Risk', 'Medium Risk', 'High Risk'],
              datasets: [{
                data: [60, 30, 10],
                backgroundColor: ['#36A2EB', '#FFCE56', '#FF6384'],
                borderWidth: 1
              }]
            }
          });
        </script>
      </div>
    </div>
{% endblock %}